<template name="findPatient">
	<div class="card">
		<div class="card-body">
			<button class="btn btn-secondary btn-show-search-modal">Patient Search</button>
		</div>
		{{#if isFindLoading}}
		<div
			class="d-flex fixed-center justify-content-center align-items-center h-100"
		>
			<div class="spinner-border font-size-5 text-info" role="status">
				<span class="visually-hidden">Loading...</span>
			</div>
		</div>
		{{else}}
        <!-- {{> searchResult findPatientHos}}  -->
        <!-- {{#if isActive}} -->
	<section class="section">
		<div class="row">
			<div class="col-lg-12">
				<div class="card">
					<div class="card-body">
						<h5 class="card-title">Search {{searchPatientQuery}}</h5>

						<!-- Table with stripped rows -->
						<table class="table datatable">
							<thead>
								<tr>
									<th scope="col">#</th>

									<th scope="col">text</th>
									<th scope="col">Options</th>
								</tr>
							</thead>
							<tbody>
                                {{#if isActive}}
                                    {{#each findPatientHos}}
                                        <tr>
                                            <th scope="row">{{@index}}</th>
                                            <td>
                                                <div class="patientDiv textRawPatient" >
                                                    {{{text.div}}}
                                                </div>
                                            </td>
                                            <td style="width: 10%">
                                                
                                                <select  id="inputFindPatient_{{@index}}" class="form-select inputFindPatient" >
                                                    <option selected5>
                                                        Select an Option
                                                    </option>
                                                    <option>View details</option>
                                                    <option>Print Patient Info</option>
                                                    <option>View FHIR</option>
													<option>Save Patient</option>
													<!-- <option>Show Resource</option> -->
                                                </select>
                                            </td>
                                        </tr>
                                    {{/each}}
                                {{else}}
                                
								{{#each findPatientPra}}
								<tr>
									<th scope="row">{{@index}}</th>
									<td>
										<div class="patientDiv textRawPatient">
											{{{text.div}}}
										</div>
									</td>
									<td style="width: 10%">
										<select
											id="inputFindPatient_{{@index}}"
											class="form-select inputFindPatient"
										>
											<option selected>
												Select an Option
											</option>
											<option>View details</option>
											<option>Show Detail</option>
											<!-- <option>Save to MyEMR</option> -->
											<option>Print Patient Info</option>
											<option>View FHIR</option>
										</select>
									</td>
								</tr>
								{{/each}}
                                {{/if}}

							</tbody>
						</table>
						<!-- End Table with stripped rows -->
					</div>
				</div>
			</div>
		</div>
	</section>
        {{/if}}
		{{> searchPatientModal}}
		{{> searchPatientFhirModal}}
		{{> savePatientModal}}
		{{> showResourceModal}}
		<!-- {{> saveResourceModal}} -->
	</div>
</template>


<template name="searchPatientModal">
	<div class="modal fade" id="searchPatientModal" tabindex="-1" aria-labelledby="searchPatientModal" aria-hidden="true">
		<div class="modal-dialog">
		  <div class="modal-content">
			<div class="modal-header">
			  <h1 class="modal-title fs-5" >
				{{#if searchOfHos}}
				Find Patient in Practice to attach "report Type"
				{{else}}
				Search Patient Modal
				{{/if}}
			</h1>
			  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">

			<form id="formFindPatient" class="row g-3 search-patient-form">
				{{#if searchOfHos}}
				
				<div class="col-xs-12">
					<div class="form-floating">
						{{#if isId}}
						<input
							type="text"
							name="patientMrn"
							class="form-control"
							id="patient-mrn"
							placeholder="Patient MRN"
							disabled
						/>
						{{else}}
						 
						<input
						type="text"
						name="patientMrn"
						class="form-control"
						id="patient-mrn"
						placeholder="Patient MRN"
						
					/>
						{{/if}}
						<label for="patient-mrn"
							>Patient MRN</label>
					</div>
				</div>

				<div class="col-xs-12">
					<div class="form-floating">
						{{#if isMrn}}
						<input
							type="text"
							name="patientId"
							class="form-control"
							id="patient-id"
							placeholder="Patient ID"
							disabled
						/>
						{{else}}
						<input
							type="text"
							name="patientId"
							class="form-control"
							id="patient-id"
							placeholder="Patient ID"
						/>
						{{/if}}
						<label for="patient-id"
							>Patient ID</label>
					</div>
				</div>
				{{/if}}
					<div class="col-xs-12">
						<div class="form-floating">
							{{#if isUnique}}
							<input
								type="text"
								name="lastName"
								class="form-control"
								id="findLastName"
								placeholder="Last Name"
								disabled
							/>
							{{else}}
							<input
								type="text"
								name="lastName"
								class="form-control"
								id="findLastName"
								placeholder="Last Name"

							/>
							{{/if}}
							<label for="findLastName"
								>
								{{#if searchOfHos}}
								Family
								{{else}}
								Last Name
								{{/if}}
								</label
							>
						</div>
					</div>
					<div class="col-xs-12">
						<div class="form-floating">
							{{#if isLastName}}
							{{#if isUnique}}
							<input
								type="text"
								name="firstName"
								class="form-control"
								id="findFirstName"
								placeholder="First Name"
								disabled
							/>
							{{else}}
							<input
								type="text"
								name="firstName"
								class="form-control"
								id="findFirstName"
								placeholder="First Name"
							/>
							{{/if}}
							{{else}}
							<input
								type="text"
								name="firstName"
								class="form-control"
								id="findFirstName"
								placeholder="First Name"
								disabled
							/>
							{{/if}}
							<label for="findFirstName">
								{{#if searchOfHos}}
								Given
								{{else}}
								First Name
								{{/if}}
							</label>
						</div>
					</div>
					<div class="col-xs-12">
						<div class="form-floating">
							{{#if isLastName}}
							{{#if isUnique}}
							<input
								id="birthday"
								type="date"
								name="birthday"
								class="form-control"
								disabled
							/>
							{{else}}
							<input
								id="birthday"
								type="date"
								name="birthday"
								class="form-control"
							/>
							{{/if}}
							{{else}}
							<input
								id="birthday"
								type="date"
								name="birthday"
								class="form-control"
								disabled
							/>
							{{/if}}
							<label for="birthday" class="col-form-label"
								>
								{{#if searchOfHos}}
								DOB
								{{else}}
								Date
								{{/if}}
								</label
							>
						</div>
					</div>
					{{#if searchOfHos}}
					{{else}}
					<div class="col-xs-12">
						<div class="form-floating">
							<input
								type="text"
								name="encounter"
								class="form-control"
								id="recordNumber"
								placeholder="Medial Record Number"
							/>
							<label for="recordNumber">Medical Record Number</label>
						</div>
					</div>
					{{/if}}
				<div class="col-xs-12">
					<div class="col-xs-6 text-end">
					{{#if isLastName}}
					<button
					type="submit"
					class="btn btn-primary search-patient"
				>
					Search
				</button>
				<button class="btn btn-secondary reset">Reset</button>
				
				{{else}}
				{{#if isUnique}}
					<button
					type="submit"
					class="btn btn-primary search-patient"
				>
					Search
				</button>
				<button class="btn btn-secondary reset">Reset</button>
				{{else}}
				<button
					type="submit"
					class="btn btn-primary search-patient"
					disabled
				>
					Search
				</button>
				<button class="btn btn-secondary reset" disabled>Reset</button>
				{{/if}}
				{{/if}}
				</div>
				</div>

			</form>
		</div>
		  </div>
		</div>
	  </div>
</template>

<template name="searchPatientFhirModal">
	<div class="modal fade" id="searchPatientFhirModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
		  <div class="modal-content">
			<div class="modal-header">
			  <h1 class="modal-title fs-5" id="exampleModalLabel">
					View FHIR
				</h1>
			  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
					<pre>
					{{fhirModalData}}
					</pre>
			</div>
			<div class="modal-footer">
			  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
			  <!-- <button type="button" class="btn btn-primary fhir-data-save" data-bs-dismiss="modal">Save</button> -->
			</div>
		  </div>
		</div>
	  </div>
</template>


<template name="savePatientModal">
	<div class="modal fade" id="savePatientModal" tabindex="-1" aria-labelledby="savePatientModal" aria-hidden="true">
		<div class="modal-dialog">
		  <div class="modal-content">
			<div class="modal-header">
			  <h1 class="modal-title fs-5" id="saveResourceTitle">Save Patient Modal</h1>
			  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				
                <div class="row mb-3">
						<label for="patientMRN" class="col-sm-4 col-form-label" ><b>Patient MRN: </b></label>
		
						<div class="col-sm-8">
							<input type="text" class="form-control patient-mrn" id="patientMRN" placeholder="EMR Assigned">
						</div>
						</div>
				<!-- <div class="col-12 align-items-center d-flex">
					<label for="patientMRN" class="form-label" ><b>Patient MRN: </b>{{patientMrn}}</label>
				</div> -->
				{{{fhirModalData}}}
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary btn-save-patient" data-bs-dismiss="modal">Save</button>
			</div>
		  </div>
		</div>
	  </div>
</template>

<template name="showResourceModal">
	<div class="modal fade" id="showResourceModal" tabindex="-1" aria-labelledby="showResourceModal" aria-hidden="true">
		<div class="modal-dialog">
		  <div class="modal-content">
			<div class="modal-header">
			  <h1 class="modal-title fs-5" id="saveResourceTitle">Resource Confirm Modal</h1>
			  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="col-xs-12">
					<label for="patientMRN" class="form-label" ><b>Patient MRN: </b>{{selectedPatientMRN}}</label>
				</div>
				<div class="col-xs-12">
					<label for="patientMRN" class="form-label" ><b>Patient ID: </b>{{selectedPatientID}}</label>
				</div>
				<div class="col-xs-12">
					<label for="patientMRN" class="form-label" ><b>Family: </b>{{selectedPatientFamily}}</label>
				</div>
				<div class="col-xs-12">
					<label for="patientMRN" class="form-label" ><b>Given: </b>{{selectedPatientGiven}}</label>
				</div>
				<div class="col-xs-12">
					<label for="patientMRN" class="form-label" ><b>DOB: </b>{{selectedPatientDOB}}</label>
				</div>
				
				<!-- {{{fhirModalData}}} -->
				<!-- <div class="col-sm-12">

                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="save-reference">
                      <label class="form-check-label" for="gridCheck1">
                        Document Reference
                      </label>
                    </div>

                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="save-diagnostic">
                      <label class="form-check-label" for="gridCheck2">
                        Diagnostic Report
                      </label>
                    </div>
					
                    <div class="form-check">
						<input class="form-check-input" type="checkbox" id="save-observation">
						<label class="form-check-label" for="gridCheck2">
							Observation
						</label>
					</div>

                    <div class="form-check">
						<input class="form-check-input" type="checkbox" id="save-condition">
						<label class="form-check-label" for="gridCheck2">
							Condition
						</label>
					</div>

                    <div class="form-check">
						<input class="form-check-input" type="checkbox" id="save-immunization">
						<label class="form-check-label" for="gridCheck2">
							Immunization
						</label>
					</div>

                    <div class="form-check">
						<input class="form-check-input" type="checkbox" id="save-questionnaire">
						<label class="form-check-label" for="gridCheck2">
							Questionnaire Response
						</label>
					</div>

                </div> -->
			</div>
			<div class="modal-footer">
			  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
			  <!-- <button type="button" class="btn btn-primary btn-save-resource" data-bs-dismiss="modal">Save</button> -->
			</div>
		  </div>
		</div>
	  </div>
</template>
<!-- 
<template name="saveResourceModal">
	<div class="modal fade" id="saveResourceModal" tabindex="-1" aria-labelledby="saveResourceModal" aria-hidden="true">
		<div class="modal-dialog">
		  <div class="modal-content">
			<div class="modal-header">
			  <h1 class="modal-title fs-5" id="saveResourceTitle">Save Patient Modal</h1>
			  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
                <label for="patientMRN" class="form-label" ><b>Patient MRN: </b>{{patientMrn}}</label>
				{{{fhirModalData}}}
			</div>
			<div class="modal-footer">
			  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
			  <button type="button" class="btn btn-primary btn-save-resource" data-bs-dismiss="modal">Save</button>
			</div>
		  </div>
		</div>
	  </div>
</template> -->



<!-- <template name="savePatientFhirModal">
	<div class="modal fade" id="searchPatientFhirModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
		  <div class="modal-content">
			<div class="modal-header">
			  <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
			  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				{{#if showSaveModal}}
				{{{fhirModalData}}}
				{{else }}
					<pre>
					{{fhirModalData}}
					</pre>
				{{/if}}
			</div>
			<div class="modal-footer">
			  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
			  <button type="button" class="btn btn-primary fhir-data-save" data-bs-dismiss="modal">Save</button>
			</div>
		  </div>
		</div>
	  </div>
</template> -->
