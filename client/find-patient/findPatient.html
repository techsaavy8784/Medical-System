<template name="findPatient">
	<div class="card">
		<div class="card-body">
			<h5 class="card-title">Patient Search</h5>

			<form id="formFindPatient" class="row g-3 search-patient-form">
				<div class="col-xs-12 col-sm-6 col-lg-3">
					<div class="form-floating">
						<input
							type="text"
							name="lastName"
							class="form-control"
							id="findLastName"
							placeholder="Last Name"

						/>
						<label for="findLastName"
							>Last Name</label
						>
					</div>
				</div>
				<div class="col-xs-12 col-sm-6 col-lg-3">
					<div class="form-floating">
						{{#if isLastName}}
						<input
							type="text"
							name="firstName"
							class="form-control"
							id="findFirstName"
							placeholder="First Name"

						/>
						{{else}}
						<input
							type="text"
							name="firstName"
							class="form-control"
							id="findFirstName"
							placeholder="First Name"
							disabled
						/>
						{{/if}}
						<label for="findFirstName">First Name</label>
					</div>
				</div>
				<div class="col-xs-12 col-sm-6 col-lg-3">
					<div class="form-floating">
						{{#if isLastName}}
						<input
							id="birthday"
							type="date"
							name="birthday"
							class="form-control"
						/>
						{{else}}
						<input
							id="birthday"
							type="date"
							name="birthday"
							class="form-control"
							disabled
						/>
						{{/if}}
						<label for="birthday" class="col-form-label"
							>Date</label
						>
					</div>
				</div>
				<div class="col-xs-12 col-sm-6 col-lg-3">
					<div class="form-floating">
						<input
							type="text"
							name="encounter"
							class="form-control"
							id="findEncounter"
							placeholder="Encounter"
						/>
						<label for="findEncounter">Encounter</label>
					</div>
				</div>
				<!-- <div class="col-xs-12 col-sm-6 col-lg-3">
              <div class="col-md-12">
                <div class="form-floating">
                  <input type="text" class="form-control" id="floatingCity" placeholder="City">
                  <label for="floatingCity">City</label>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-floating mb-3">
                <select class="form-select" id="floatingSelect" aria-label="State">
                  <option selected>New York</option>
                  <option value="1">Oregon</option>
                  <option value="2">DC</option>
                </select>
                <label for="floatingSelect">State</label>
              </div>
            </div>
            <div class="col-md-2">
              <div class="form-floating">
                <input type="text" class="form-control" id="floatingZip" placeholder="Zip">
                <label for="floatingZip">Zip</label>
              </div>
            </div> -->
				<div class="col-xs-12 text-end">
					{{#if isLastName}}
					<button
						type="submit"
						class="btn btn-primary search-patient"
					>
						Search
					</button>
					<button class="btn btn-secondary reset">Reset</button>
					{{else}}
					<button
						type="submit"
						class="btn btn-primary search-patient"
						disabled
					>
						Search
					</button>
					<button class="btn btn-secondary reset" disabled>Reset</button>
					{{/if}}
				</div>
			</form>
		</div>
		{{#if isFindLoading}}
		<div
			class="d-flex fixed-center justify-content-center align-items-center h-100"
		>
			<div class="spinner-border font-size-5 text-info" role="status">
				<span class="visually-hidden">Loading...</span>
			</div>
		</div>
		{{else}} 
        <!-- {{> searchResult findPatientHos}}  -->
        
	<section class="section">
		<div class="row">
			<div class="col-lg-12">
				<div class="card">
					<div class="card-body">
						<h5 class="card-title">Search Results</h5>

						<!-- Table with stripped rows -->
						<table class="table datatable">
							<thead>
								<tr>
									<th scope="col">#</th>

									<th scope="col">text</th>
									<th scope="col">Options</th>
								</tr>
							</thead>
							<tbody>
                                {{#if isActive}}
                                    {{#each findPatientHos}}
                                        <tr>
                                            <th scope="row">{{@index}}</th>
                                            <td>
                                                <div class="patientDiv textRawPatient" >
                                                    {{{text.div}}}
                                                </div>
                                            </td>
                                            <td style="width: 10%">
                                                
                                                <select  id="inputFindPatient_{{@index}}" class="form-select inputFindPatient" >
                                                    <option selected5>
                                                        Select an Option
                                                    </option>
                                                    <option>View details</option>
                                                    <option>Save in Practice</option>
                                                    <option>Print Patient Info</option>
                                                    <option>View FHIR</option>
                                                </select>
                                                
                                            </td>
                                        </tr>
                                    {{/each}}
                                {{else}}
                                
								{{#each findPatientPra}}
								<tr>
									<th scope="row">{{@index}}</th>
									<td>
										<div class="patientDiv textRawPatient">
											{{{text.div}}}
										</div>
									</td>
									<td style="width: 10%">
										<select
											id="inputFindPatient_{{@index}}"
											class="form-select inputFindPatient"
										>
											<option selected>
												Select an Option
											</option>
											<option>View details</option>
											<option>Show Detail</option>
											<option>Save in Practice</option>
											<option>Print Patient Info</option>
											<option>View FHIR</option>
										</select>
									</td>
								</tr>
								{{/each}}
                                {{/if}}

							</tbody>
						</table>
						<!-- End Table with stripped rows -->
					</div>
				</div>
			</div>
		</div>
	</section>
        {{/if}}
		{{> searchPatientFhirModal}}
	</div>
</template>


<template name="searchPatientFhirModal">
	<div class="modal fade" id="searchPatientFhirModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
		  <div class="modal-content">
			<div class="modal-header">
			  <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
			  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				{{#if showSaveModal}}
				{{{fhirModalData}}}
				{{else }}
					<pre>
					{{fhirModalData}}
					</pre>
				{{/if}}
			</div>
			<div class="modal-footer">
			  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
			  <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Save</button>
			</div>
		  </div>
		</div>
	  </div>
</template>
